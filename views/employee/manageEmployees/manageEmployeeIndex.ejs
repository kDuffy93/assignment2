<% include ../../partials/header.ejs %>



<div class="container-fluid" style="margin-top:50px;">
<div id="filterDiv"style="padding-top:20px;" class="col-md-offset-7">


<label for="sortBy"> Field To Search By</label>
<select id="sortBy" onchange="OnSelectedIndexChanged(this)"> 
    <option value="First Names"> First Names </option>
    <option value="Last Names"> Last Names </option>
    <option value="Departments"> Departments </option>
  
    </select>
</br>
    <label for="filterText">Text to Search: </label> <input type="text" style="width:225px;" placeholder="Search Employees By <%= searchBy %>" onkeyup="filterTable()" id="filterText"> </input>
</div>
<a href="manageEmployees/add" class="btn btn-success" style="margin-bottom:10px;">Add a New employee</a>


<table class="table table-hover table-responsive table-bordered" id="filterTable">
    <tr><th>First Name</th><th>surName</th><th>department</th><th>Certifications<th>Edit</th><th>Delete</th></tr>
<!--logic to populate table -->
    <% for (var i = 0; i < users.length; i++) { %>
        <tr onclick="clickTable(this)"  id="<%= users[i]._id %>">
            <td class="active"  ><%= users[i].firstName %></td>
            <td class="active"><%= users[i].surName %></td>
            <td class="warning" ><%= users[i].departmentname %></td>
            <td class="info">
                <a href="manageEmployees/employeeCertifications/<%= users[i]._id %>" class="btn btn-info">Add Certificate</a>
                 </br>
              <% for (var j = 0; j < allUserCourses.length; j++) 
                { if(((j+1)/5) == 1 ||  ((j+1)/5) == 2 || ((j+1)/5) == 3 || ((j+1)/5) == 4 || ((j+1)/5) == 5 || ((j+1)/5) == 6 || ((j+1)/5) == 7)
                {
%>  <%
                }
              
                    if(allUserCourses[j].userid == users[i]._id ) {
                          for(var w = 0; w < allCourses.length; w++)
                          {
                              if(allCourses[w].coursename == allUserCourses[j].coursename)
                              {
                                                               
                              %>
                          
<img SRC="../../images/certificateIcons/<%= allCourses[w].iconurl %>" height="64px" width="64px" alt="<%= allUserCourses[j].coursename %>" title="<%= allUserCourses[j].coursename %>" >

                     <% } 
                           }
                     } %>

               <%  } %>
            </td>
            
            <td class="info"><a href="manageEmployees/<%= users[i]._id %>" class="btn btn-info">Edit</a>
           
               </td>
            <td class="danger"><a href="manageEmployees/delete/<%= users[i]._id %>" class="confirmation btn btn-danger">Delete</a></td>
          
        </tr>
    <% } %>

</table>

</div>
<script type="text/javascript">
$(document).on("ready","#filterTable",function(){
  $("tr").on("tap",clickTable(this));            
});
</script>
<%include ../../partials/footer.ejs%>
